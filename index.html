<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Meldkamersysteem met Discord webhook</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    #dashboard { margin-top: 20px; }
    textarea { width: 300px; height: 100px; }
    input, select, button { margin: 5px 0; padding: 8px; font-size: 1rem; }
  </style>
</head>
<body>
  <div id="loginScreen">
    <h2>Inloggen</h2>
    <label for="role">Rol:</label><br />
    <select id="role">
      <option value="">-- Kies je rol --</option>
      <option value="politie">Politie</option>
      <option value="brandweer">Brandweer</option>
      <option value="ambulance">Ambulance</option>
      <option value="kmar">KMar</option>
    </select><br />

    <label for="roepnummer">Roepnummer:</label><br />
    <input type="text" id="roepnummer" placeholder="Bijv. 12-343" /><br />

    <button onclick="inloggen()">Inloggen</button>
    <p id="loginFout" style="color: red;"></p>
  </div>

  <div id="dashboard" style="display:none;">
    <h2>Melding aanmaken</h2>
    <textarea id="meldingText" placeholder="Typ hier de melding..."></textarea><br />
    <button onclick="meldingAanmaken()">Melding versturen</button>
    <p id="meldingStatus"></p>
  </div>

  <script>
    const webhookURL = "https://discord.com/api/webhooks/1372626691033141380/4DUrU0cVWezBccUQDYn6rUuPrv-vJ1BgUAdNeDzym5VuuOWUYUb_5nkXrmhnPmHMFGNS";

    let huidigeRoepnummer = "";

    function inloggen() {
      const role = document.getElementById("role").value;
      const roepnummer = document.getElementById("roepnummer").value.trim();
      const foutText = document.getElementById("loginFout");

      if (!role) {
        foutText.textContent = "Kies een rol!";
        return;
      }
      if (!roepnummer) {
        foutText.textContent = "Vul een roepnummer in!";
        return;
      }

      huidigeRoepnummer = roepnummer;
      document.getElementById("loginScreen").style.display = "none";
      document.getElementById("dashboard").style.display = "block";
      foutText.textContent = "";
    }

    function meldingAanmaken() {
      const meldingText = document.getElementById("meldingText").value.trim();
      const statusElem = document.getElementById("meldingStatus");

      if (!meldingText) {
        statusElem.textContent = "Vul eerst een melding in!";
        statusElem.style.color = "red";
        return;
      }

      const bericht = `Melding van roepnummer **${huidigeRoepnummer}**: ${meldingText}`;

      fetch(webhookURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ content: bericht }),
      })
        .then((response) => {
          if (response.ok) {
            statusElem.textContent = "Melding succesvol verstuurd!";
            statusElem.style.color = "green";
            document.getElementById("meldingText").value = "";
          } else {
            statusElem.textContent = "Fout bij versturen melding.";
            statusElem.style.color = "red";
          }
        })
        .catch((error) => {
          statusElem.textContent = "Fout bij versturen melding.";
          statusElem.style.color = "red";
          console.error("Error bij webhook:", error);
        });
    }
  </script>
</body>
</html>
